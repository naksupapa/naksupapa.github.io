---
title: 게임 서버 개발 & 운영 방안 고민
author: naksupapa
date: 2023-04-24 00:00:00 +0900
categories: [development, server]
tags: [development, server, game, architecture]
mermaid: true
---

## 개발 언어
> 대부분의 경력이 닷넷 기반으로 이루어져 있다보니, 닷넷 기반의 언어를 사용 하기로 한다.  
> C#, ASP.core 3.1  

## OS
> 익숙한 윈도우 서버를 사용 한다.  
> 웹 사이트 올리려면, IIS 에 올려서 관리 하면 편하다.  
> 
> 윈도우 라이선스 비용 매달 10만원 장기 할인 받는다 해도, 아무리 저렴해도 머신당 5만원 생각 해야 한다.  
> 리눅스 우분투의 GUI 환경도 고려 해 볼만 하다.  
> 리눅스 CLI 모르면 못해? 그럼 일단 GUI 로 리눅스와 친해 지고 보자.  
> 
> 비용절감을 위해 리눅스 R&D 필요  
> 현재 나온 증상 : 리눅스에서 웹 프로토콜 Post가 십히는 현상이 있다?, 일반 실행 파일을 실행 해서 그런게 아닐까?  
> 리눅스로 변경 된다면, NGINX(선호) or 아파치2 적용 필요  

## DB
> 현재 Mysql SQL 로 질의를 던지고 있음 ( Mysql 프로시저가 느리다 )  
> 개선 제안 : sql to procedure 마이그레이션
> 제안 이유 : 재사용성, 코드의 복잡성, 보안, 관리 이슈, 이슈 대응 부분이 어렵다.  
> 글로벌 서비스 들어 가기전에 대안1 or 대안2 중에 마련 되어져 있어야 할거 같다.  
> 이전 담당자와 논의 필요.  

> 대안 0. 현재 구조를 유지 한다.
> 가장 단순하다.
> 현 프로젝트 유지 기간은 얼마나 유지 할 것인가?
> 
> 대안 1. Mysql SQL -> Procedure 로 변경, 관리 부분에 대해서 전략 모색  
> 장점 : 어느정도 현재 코드를 유지  
> 단점 : 이후 담당자가 Mysql 에 익숙치 않음( 배우면 되는 영역이긴 하지만, 시간이 소요 된다. )    
>
> 대안 2. Mysql -> MsSql 로 마이그레이션  
> 장점 : 담당자가 주로 쓰던 SQL 이라 대응이 수월함  
> 단점 : 라이브 데이터라 데이터 이슈가 발생 할수도 있음. 비용이 들어 간다.  
> sql web edition 으로 할 경우, 비용 줄일수 있음  
> sql web edition 으로 변경 할 경우, profiler 사용 못함, 압축 백업 X  
> 참고로 : 우분투 위에 MS-Sql web edition 을 설치 할수도 있다. 라이선스 비용 월 3만원 정도
> 
> 대안 3. Mysql -> postgreSql 로 마이그레이션 ...  
> 다음 프로젝트 대안으로는 좋을듯 하나, 현재 라이브중 대안으로는 어려울듯 하다.  
>
> 대안 4. Mysql -> MongoDB 로 마이그레이션 ...  
> 요즘 MongDB로 사용 하는 업체들이 보이기 시작 R&D 해볼만한 수준  
> 어플리케이션에서 사용 하는 법은 수월해 보이나, 관리 측면에서는 버거울듯 싶다. need dba  

## 메신저, 협업 프로그램
> 현재 오픈 메신저를 사용 하고 있다.  
> 레드마인이 설치 되어 있으나, 프로젝트가 낮아 활용을 하고 있지 않음.  
> 가장 큰 문제는 이 데이터가 휘발성이라는 것이다.  
> 히스토리가 전혀 남지 않음. 중복 이슈가 생겼을때, 검색이 안된다.  
> 유료로는 슬랙, 지라, 컨플런스, 트렐로, 노션 등을 사용 할수 있으나, 무료로 대체 하는게 어떨까 싶다.  
> 참고로 대안으로 R&D 후 도입 하는 형태가 좋을것으로 판단 된다.  

> 메신저 :  
> mattermost - 슬랙의 이슈에 대한 쓰레드 형태 지원  
> ms teams - 스타트업 정도는 무료 사용 가능한것으로 알고 있음  
> 시놀로지 채팅 - 스크린샷이 멀티 모니터 지원이 안됨, 메시지 가는게 좀 느리다.  

> 협업 프로그램 :  
> 레드마인 - 오래된 협업 프로그램 검증 되어 있음.  
> 셋팅 및 관리 하는데 좀 어렵다. 간단한 부분만 쓴다면, 쓸만할수 있다.  
> focalboard - mattermost 업체서 만든 협업 프로그램. 아직 사용 못 해 봤다.  

## 운영툴
> 운영툴이 win 어플리케이션으로 제작 되어 있어, 배포시 마다 알려야 한다.  
> 사용 하기 위해, PC가 필요 하다.  
> 웹으로 변경 하는게 운영 측면에서 좋을거라 판단 된다.  
> asp.core 을 기반으로 하는 blazor 프레임워크를 사용 해서, 간단히 R&D 해보면 좋을거 같다.  
> 현재 운영 api 가 게임서버에 물려 있다.  
> 해당 로직을 따로 분리 하여, 프로젝트를 나눠 iis 에 운영 웹(다른포트사용)으로 띄우는게 좋을거 같다.  

## BI
> 루커 스튜디오 와 슈퍼셋을 사용 하면 좋을거 같다.  
> 태블로(유료)  
> 구글 루커 스튜디오(무료) - 사용법이 슈퍼셋에 비해 조금 쉽다(?)  
> 슈퍼셋(무료) - Air&b 에서 공개한 오픈소스, 설정이 살짝 까다롭다(?)  
> 유료인 태블로 제외 하고 루커 or 슈퍼셋 둘중에 하나 쓰자!  

## 소스 제어
> 나스에 svn 설치 하여 사용 중  
> 4way, raid1 로 드라이브 2개로 나눠서 사용중  
> 현재를 유지 해도 무방해 보임.  
> 백업은 확인 필요  

## IP
> 현재 고정 IP + 공유기 물려서 인터넷 사용중인 상황  
> 이 상태 유지 하고 이슈 생길 경우, 유동 IP or 고정 IP 회선 1개 더 추가 하는게 좋을거 같음.  

## 클라우드
> 네이버 클라우드에서 -> aws, 애저, google 쪽으로 이동 하는게 좋아 보임  
> 클라우드 기능이 다양하고, 많음  
> 이중 구글이 가격이 저렴한것으로 알고 있음  
> 실제 가격 비교를 해 봤을때, 오히려 Azure 가 더 저렴한 것도 있음  
> 좀더 디테일 하게 확인 해 볼 필요 있음 특히 3년 임대로 할 경우, 애저의 경우, 50%에 임박하는 할인도 보여준다.  

## 서버 푸시
> google(fcm), apple(apns) 기능을 추가 하여, 포털 서버를 구축 하여 운영 하여도 되고, 운영서버에 포함 시켜도 된다.  
> 스케쥴링 전체 푸시 보내기 기능 도입 필요.  
> 서버 푸시는 유저 유입에 도움을 줄수 있다고 판단 한다.  

## 개발 패킷 문서
> markdown 으로 문서화 하면 좋을거 같다. mermaid 사용
